{% extends "index.html" %}
{% load staticfiles %}
{% block content %} 
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
  <legend>物理机信息表</legend>
</fieldset>

<div>
  <table id="dateTable" width=100>
    <thead>
      <tr>
        <th>序列号</th>
        <th>产品</th>
        <th>主机名</th>
        <th>地址</th>
        <th>机型</th>
        <th>系统</th>
        <th>模版</th>
        <th>处理器</th>
        <th>内存</th>
        <th>状态</th>
        <th>操作</th>     
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>
<script src="{% static 'table.js' %}"></script>
<script src="{% static 'js/vip_table.js'%}"></script>
<script src="{% static 'js/form.js'%}"></script>
<script src="{% static 'js/layer.js'%}"></script>
<script type="text/javascript">
    // 配置
    

    // layui方法
    layui.use(['form','layer'], function(){

        // 操作对象
        var form = layui.form()
        ,layer = layui.layer
        ,$ = layui.jquery;

        // 初始化表格
        $('#dateTable').DataTable({
            // "dom": '<"top">rt<"bottom"flp><"clear">',
            "autoWidth": false,                     // 自适应宽度
            "stateSave": true,                      // 刷新后保存页数
            "order": [[ 1, "desc" ]],               // 排序
            "searching": false,                    // 本地搜索
            "info": true,                           // 控制是否显示表格左下角的信息
            "stripeClasses": ["odd", "even"],       // 为奇偶行加上样式，兼容不支持CSS伪类的场合
            "pagingType": "simple_numbers",         // 分页样式 simple,simple_numbers,full,full_numbers
            "ajax": {
                "url": {% url 'homePage' %}
            },
            "sServerMethod" : "POST",               // POST
            "deferRender": true,                    // 当处理大数据时，延迟渲染数据，有效提高Datatables处理能力
            "columns": [                            // 自定义数据列
                {data: 'sn'},
                {data: 'product'},
                {data: 'hostname'},
                {data: 'ip'},
                {data: 'machine'},
                {data: 'os'},
                {data: 'clone'},
                {data: 'cpu_phy'},
                {data: 'mem'},
                {data: 'status'},
                {data: function(obj){
                    return  '<a class="layui-btn layui-btn-small btn-edit" data-id="'+obj.sn+'">查看</a>' +
                            '<a class="layui-btn layui-btn-small layui-btn-normal btn-edit" data-id="'+obj.id+'">编辑</a>' +
                            '<a class="layui-btn layui-btn-small layui-btn-danger btn-edit" data-id="'+obj.id+'">删除</a>';
                },width:'155'}
            ],
            "stateSaveParams": function () {           // 初始化完成调用事件
                // 重新渲染form checkbox 如果你要使用layui的复选框样式打开这个
                form.render('checkbox');
            }
        });

        // 例:获取ids
        // $(document).on('click','#btn-delete-all', function(){
        //     // getIds(table对象,获取input为id的属性)
        //     var list = vipTable.getIds($('#dateTable'),'data-id');
        //     console.log(list)
        //     if(list == null || list == ''){
        //         layer.msg('未选择');
        //     }else{
        //         layer.msg(list);
        //     }
        // });

        // you code ...


    });
</script>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
  <legend>数据库信息</legend>
</fieldset>







<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
  <legend>常用URL</legend>
</fieldset>
<p class="layui-elem-quote">其实就是自定义了个“|”的分隔符，然后最后一项也可以点。</p>        
{% endblock %}          
